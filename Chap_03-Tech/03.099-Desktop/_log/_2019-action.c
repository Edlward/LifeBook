
//================================
1000-plan list:
{
00. 2019-plan: 	English,   			Speechcraft,
				Heart HuSea ocean,  Heart-Mouth-Step-One.
				FOC board, 			TaoBao CodeStore, 
				Work commu skill,	Taekwondo,			Chinese Go Chess 'Do',
				Honeymoon, 			WeddingPhotos,		Wedding feast,
				
01. every day : 01.00-(Notes)Note, is just note. 	//note.
				01.01-(Commu)Email,					//commu-understand-english.
				01.02-(Rview)GitLab web, git shell fetch.	//check state.
				01.03-(Assgn)Jira,		//assign.
				01.04-(Tools)Eclipse,  	//NotePad, Q-Dir, FireFox, Email.
				01.05-(Speak)English,  	//speadk.
				
				  Code.
				  project board; 
				  Git commit; 
                  smile to problem; 
                  email;
				  UnitTest.
					  
		
					  
02. every Monday: swing door platform meeting.
03. trainning.
04. Python.
05. Key Words:

	NCV, ATS;// WORK.
	EGM, DLU;//(eclipse)
	BFC, CMP.//(git)
	CPI, OVS.// name.

	
	

EF : course start on 2 July
姓名： Hua Jerry
邮箱： jerry.hua@assaabloy.com
电话： +86 051287181277
手机： 18248788319
公司： Assa Abloy
国家： China
您的测试结果
日期： 2018-07-04
推荐级别： 10级 － 中高级
级别描述：
此阶段结束的时候，您将能跟上一个熟悉的话题或就此发言，或者能跟上一个包含广泛话题的对话。
能浏览文章来获取相关信息，并能理解复杂详细的说明或建议。能在别人讲话时做笔记，
或能写以不标准语言描述要求的信件。
总分： 52%
语法： 42%
听力： 52%
阅读： 61%

advisors@ef.com
课程有效期至: 2018年12月30日

个人学习计划：
1）每月完成学习1个单元通用英语；
4）每月至少参加1节小班会话课。
3）每月至少参加1节单元最后的私人课堂；
2）每月至少参加2节40分钟私教课堂；

课程介绍：
普通英语共有16个级别，每级别有6个单元，每个单元包含四节自学课以及两种形式的口语课。
第一种形式是小班会话课，每天24小时的整点和大部分半点开课，每堂课45Min，没有参加次数限制，但是小班会话课是按照您是否在课堂待满30分钟以上及是否发言积极来评分的，所以不积极发言的分数可能不高。
第二种形式是每单元最后有一节对应的私人课堂（20分钟），主要是对这个单元的复习和回顾，所以需要您先把前面的四节自学课自行完成，完成后会自动解锁，由于这节课是一对一的，所以需要您提前24小时在网上预约或者取消。
第三种形式是40分钟的私教课，主要是根据您的个人喜好选定一个主题，老师会根据您选定的主题来展开上课的主要内容。由于这节课也是一对一的，所以需要您提前24小时在网上预约或者取消。




Dear All,

根据《关于苏州工业园区实施人才安居工程的若干意见（试行）》（苏园工〔2017〕29号）精神，现就组织申报园区2018年度人才薪酬补贴通知如下。

1申报范围
在园区注册成立，并符合下列条件之一的企事业单位，可组织人员申报园区人才薪酬补贴：
1．国家级人才工程、国家万人计划、江苏省双创人才计划、姑苏人才计划、园区金鸡湖人才计划入选者创办的企业；
2．国家高新技术企业；
3．生物医药、人工智能、纳米技术应用等新兴产业企业；
4．高端装备制造、总部经济、金融机构、专业服务、现代物流、服务外包、电子商务、商贸、文化创意、科技中介、医疗机构等先进制造业、现代服务业领域的企事业单位；
5．区内科研院所和科教创新区内高等院校。
园区国有企事业单位及税收征收级次在市级的单位不纳入申报范围（法人金融机构及推动在园区设立功能性总部的金融分支机构除外）。

2申报对象
园区人才薪酬补贴申报对象应同时具备以下条件：
1．与企业依法签订1年以上（含1年）劳动合同，并正常缴纳园区社保或个税3个月以上（含3个月）；
2．具有全日制硕士及以上学位或具有正高级职称；
3．年龄不超过45周岁。
企业控股股东、法定代表人、董事长、总经理等不纳入申报对象。

3补贴标准
具有硕士学位的人才，给予3万元薪酬补贴；具有博士学位的人才，给予4万元薪酬补贴；具有正高级职称的人才，给予5万元薪酬补贴。补贴金额均为税前金额，个人所得税自理。
4申报受理
1．申报时间：2019年1月18日至2月28日。
2．申报方式：符合条件的企事业单位和人才分别登录园区人才薪酬补贴申报网站
（www.siphrd.com/sipac_xcbt_2018），按要求完整填报企业及人员信息，并上传相关证明材料原件
（彩色）扫描件；人才申请名单由所在单位按推荐顺序进行排列。
3．认定程序：
网上初审：2019年3月1日至3月31日，各业务主管部门对照条件，审核企事业单位及申报人资质、相关材料的完整度以及材料与所填信息的匹配度，符合申报条件且材料齐备后方可通过初审。
专家评审：2019年4月1日至4月30日，各业务主管部门组织专家组，根据申报人人才评价积分及其他事项完成评审，形成复审通过人员名单；
现场审验：2019年5月1日至5月31日，通过复审人员携带申报材料原件和复印件至园区一站式服务中心进行现场审验。
认定发文：2019年6月1日至6月30日，建议补贴名单报园区人才办主任会议审定后，面向社会公示。公示无异议，即正式发文公布补贴名单；公示有异议，由园区组织部进行核查并提出处理意见。
补贴拨付：2019年7月1日至7月20日，受补贴人员根据要求至园区企业发展服务中心提交薪酬补贴拨付所需材料原件和复印件，7月底前一次性拨付2018年度人才薪酬补贴。
5其它事项
1．符合申报范围的企事业单位当年度申报人员数量原则上不超过10人；已获得过薪酬补贴的人才可继续申请，但需重新申报接受评审，累计补贴原则上不超过3年。
2．已获姑苏重点产业紧缺人才资助者，不再重复享受园区人才薪酬补贴；获补贴人员若在2019年7月20日前从申请单位离职的，本年度薪酬补贴不予发放。
3．申请人及申请单位应对申报材料的真实性负责，如有虚假申报，一经查实即取消申报资格，并依法依规追究相关责任。
4．薪酬补贴申报开始后，后续工作信息将通过申报系统网站和园区智慧人才微信公众号对外发布，请及时关注。


Sunny Su
HR & Admin Manager
Pedestrian Door Solutions


}
//1000.

//================================
1001-work list:
{

01. email; headset, docking;
02. eclipse, cpputest, git, Cygwin 64bit; PC-lint;
03. project code; sharing topic;
04. startteam, 
	MBS, 
	IAR; 
	sdk; st-link driver.
	Doxygen,
	Python,
	Eclipse 32bit,
	
05. win10-en, pinyin input.(alt + Ctrl + delete )
	controlpanel-region and language.
	
06. read 2 doc everyday.

07. jenkins run CNOffice test, can message door open and close.

08. jira develop stage drag and assign.

}
//1001.

//================================
1002-link list:
{
01.	tool list.
02.	git.  0.GIT+0.MBS.
03.	mbsSdk.
04.	share.
05. \Weekly plans\
	\Item-breakdown\
		G:\R&D\Folder_Tree_Management\41_Active_Projects_Electronics
		\SwingDoorPlatform\time plan
		
06. \100_Special_Project\
	\\cnsuzsfp01\suzhou$\R&D\Folder_Tree_Management\100_Special_Project\Slider\Magnetic linear drive sliding door
	
07. G:\R&D\2018\Jeff Zhang\Weekly meeting\
08. G:\R&D\Folder_Tree_Management\95_Project_Review\
09. G:\R&D\Folder_Tree_Management\41_Active_Projects_Electronics\Technology sharing\
10. G:\R&D\Folder_Tree_Management\95_Project_Review\KPI\2018\
     //idcproxy， chinaproxy
11. G:\R&D\2018\Jeff Zhang\2018 KPI\Review result
	\\cnsuzsfp01\suzhou$\R&D\2019\Jeff Zhang\Vacation list
	G:\R&D\Folder_Tree_Management\41_Active_Projects_Electronics\SwingDoorPlatform\
	
12. http://demeesis0038.ad.global:8080/job/SwingDoors/job/jer_dev_learnCmd/15/consoleFull
	
	
}
//1002.

//================================
1003-expand knowledge:
{
001. hardware.
{
    //===MOTOR BOARD===//		V3. jerry_dev_v3_prototype.  helloWorld.cpp:202:       GPIO_SetBits(GPIOC, GPIO_Pin_11);
    pin26-PB0 , not used,     HW_VERSION.
    pin24-PC4 , not used,     HW_VERSION.

    pin16-PA2 , 'U_ENCODER_FB', not used in V3.
    pin20-PA4 , v3.3,         /I_ENCODER_FB.
    pin21-PA5 , "v2.5REF",      not used in V3.
    pin22-PA6 , not used,     /v2.5REF.
    pin44-PA11, not used,     /MOTOR_WATCHDOG. //"MOTOR_POWER" power, relay.

    pin39-PC8 , HOME1,     	  not used.
    pin40-PC9 , not used,     /MOTOR_ENABLE.   //module/init/output.cpp
    //---//1-Right.
    pin33-PB12, not used,     SPI_MEMORY_SELECT.
    pin34-PB13, not used,     SPI_SCK.
    pin35-PB14, "MOTOR_ENABLE", SPI_MISO.
    pin36-PB15, "MOTOR_POWER",  SPI_MOSI.
    //...//2-Left.
    pin56-PB4,  JTRST,        not used.
    pin03-Pc14, DC-,          not used.

    //===MAIN BOARD===//
    pin14-PA00, BT_CTS,       	U_6V6_PB.
    pin15-PA01, BT_RTS,       	PSU_HW_VERSION.
    pin16-PA02, BLE_TX,       	U_LOCK_FB.
    pin17-PA03, BLE_RX,       	ALARM_LED.
    pin21-PA05, PSU_HW_VERSION, BLE_SPI_SCK.
    pin22-PA06, U_LOCK_FB,      BLE_SPI_MISO.
    pin23-PA07, AN_6V_CHECK,    BLE_SPI_MOSI.
    //---//
    pin24-PC04, BT_EN,    		HW_VERSION.
    pin25-PC05, not used,    	U_6V_FB.
    pin38-PC07, '24V_OUT_EN',    	BLE_READY.
    pin51-PC10, not used,    	BLE_BOOT.
    pin52-PC11, not used,    	/24V_OUT_EN.  //output/mainBoard/init/???
    pin53-PC12, not used,    	BLE_nRST.
    //...//2.
    pin60-BOOT0, BOOT0,  		GND.
    pin28-PB02 , BOOT1,  		STATUS_LED.
    }

002. mockup
{
    mock().actualCall( "pGetPayloadBuffer" )
    mock().expectOneCall( "pGetPayloadBuffer" )
	
	There should be some test-case testing that the trajectoryGenerator->vResetSpeed function is called. A good aproach is to write the testcase first to see that it fails and then update the code to make it pass. That way one knows that the test is relevant.
	.
	Corrected in new commit. In my understanding now, the method should be used to learn spring exist state, so it should not assume spring exist state.
}    
  
003. git cmd
{
	git for-each-ref --sort=-committerdate refs/heads/
		
	git branch -r --contains CommitID
	
	git reset --hard HEAD~1则 删除了commit3，如果发现删除错误了，需要恢复commit3，这个时候就要使用git reflog
}

004. eclipse cmd
{
	----------------------
	uml_mdt - file:/C:/Users/jerhua/Downloads/mdt-uml2-Update-5.5.0/
	
	http://plantuml.com/eclipse
	http://hallvard.github.io/plantuml/
	http://files.idi.ntnu.no/publish/plantuml/repository/
	
	----------------------
	window -> preference -> C/C++ -> codeStyle -> formatter.
	MingoBSD_Wrap_Func03
	file   -> export -> general -> preference.
	
	----------------------
}

005. concept
{
	前端就是作为用户（使用系统的人）来说可以"看得到"的交互部分， 后端则是持久化数据或者将持久化数据读取出来的"不可见"部分。
}

  
}
//1003.

//=================================
1004-problems:
{
issue:
	motor enable;
	basic io 24v_out_en;
	
//questions:
-----------------------------------
STM32F103-RET6-GQ21U
01. "HSE_VALUE" redefined
	/SwingDoorPlatform/modules/bsp/mbs_st_m64_core_v10/config/abs-component.mk //Here.
	//HSE_VALUE=16000000 
	/SwingDoorPlatform/modules/bsp/mbs_st_m64_core_v10/init/src/system_stm32f10x.c 
    /* PCLK1 = HCLK/2 = 36MHz */
    RCC->CFGR |= (uint32_t)RCC_CFGR_PPRE1_DIV2;

    /* ADC = PCLK2/6 = 12MHZ */
    RCC->CFGR |= (uint32_t)RCC_CFGR_ADCPRE_DIV6;
	
    /*  PLL configuration: PLLCLK = HSE / 2 * 9 = 72 MHz   HSE = 16MHZ */
    RCC->CFGR &= (uint32_t)((uint32_t)~(RCC_CFGR_PLLSRC | RCC_CFGR_PLLXTPRE |
                                        RCC_CFGR_PLLMULL));
    RCC->CFGR |= (uint32_t)(RCC_CFGR_PLLSRC_HSE | RCC_CFGR_PLLMULL9 |RCC_CFGR_PLLXTPRE_HSE_Div2);

-----------------------------------
02. ADC sample: //component/motor.cpp.
	uint16_t ui16ThisI0 = static_cast<uint16_t>(inputInternal::ADCInputImp::aui16ReceivedBuffer[1U]);
	ui16ThisI0 += static_cast<uint16_t>(inputInternal::ADCInputImp::aui16ReceivedBuffer[2U]);

-----------------------------------
03. reset.
addr2line -e <elf-file-name>.elf 0x8038F53 
#8  00000 00:00:00.007    Info quasarMain OMSBasicMain task started
MBS Console online, type help for a list of available commands
> 
## Assert failed at LR 0x801D03F, task commApp
## Assert failed at LR 0x8014BBF, task outputApp
	//message: vTaskDelayUntil( &xLastWakeTime, 100 ); in static void commApp( void* pvParameters ).
	//\modules\messageRouter\motorBoard\mbs_st_m64_core_v10\config\src\messageRoutingTable.cpp

-----------------------------------	
04. can comm. //jump. //open-signal.
	extern  CanComm* const can1; 
	C:\mbs\SwingDoorPlatform\modules\comm\mainBoard\mbs_st_m64_core_v10\init\inc\comm.hpp

-----------------------------------	
05. ADC_ResetCalibration(ADC1);

-----------------------------------	
06. initial speed -40; //
const int16_t CloseCommandImp::csi16SetSpeedAtClosed    = -40; /* -0.040 rad/s shaft speed */
/SwingDoorPlatform/modules/motionControl/motorBoard/mbs_st_m64_core_v10/config/src/motionControlConfig.cpp==

-----------------------------------	
07. Kp, Ki, Kc.
enum { PUSH_SPEED_P = 400 }; 				 //400Nms/radian on output shaft
enum { MAX_ALLOW_CURRENT = 4000 };
/SwingDoorPlatform/modules/motionControl/motorBoard/mbs_st_m64_core_v10/config/inc/motionControlConfig.hpp==

ui32DoorInertiaSeenFromShaft		(30000U),//30kgm2
/SwingDoorPlatform/components/application/swingDoorGeneric/speedController/src/normalSpeedController.cpp

-----------------------------------
08. _FIX_PWM_ //PI debug.
/components/application/aaesGeneric/motor/src/motor.cpp

_FIX_CURRENT_
void MotorImp::vSetShaftTorque (const int32_t si32ShaftTorqueSet)

_FIX_SPEED_
/modules/motionControl/motorBoard/mbs_st_m64_core_v10/init/src/motionControl.cpp
si16ShaftSpeed |= pui8MessagePayload[5]; //sample speed.
#ifdef _FIX_SPEED_
    si16ShaftSpeed = SPEED_VALUE_MRAD;
#endif //_FIX_SPEED_
armSystem->vUpdate(si32ShaftAngle,si16ShaftSpeed);

------
case CLOSING:
    vSetLimitedTorqueFromSpeedController( -100, si16ShaftSpeed ); //CloseCommandImp::vUpdate()==
------
si32ShaftTorqueMax				(static_cast<int32_t>(25000)
outputConfig.hpp			enum { PROPORIONAL_GAIN = 2000 };	1500. //SPM.
							enum { INTEGRATION_FACTOR = 160 };	150.
motionControlConfig.hpp		enum { PUSH_SPEED_P 	= 30 };

    const int32_t csi32MotorResistanceInMilliOhm    = 430;
    const int32_t csi32MotorInductanceInMicroH      = 960;
    const int32_t csi32TorqueConstantInMilliNmOverA = 9980; // For SW300

-----------------------------------	
09. serial dbg_port
C:\mbs\zs_plat\modules\drivers\serial\mbs_st_m64_core_v10\config\src\serialConfig.c
#define _DEBUG_PORT_ENABLED_	
	
	static_cast<uint32_t>( MAX_ALLOW_VOLTAGE )
-----------------------------------	
10. 编码器连接，红灯亮；
	首次上电门抖动，手动推门门打开，开到位抖动不止，编码器反向；
	通信端子连接；

-----------------------------------	
11. 
UnitTest/makefile 
products/unitTest/motionControl/abs-binary.mk  

lint/conf/project.lnt	

-----------------------------------	
12. TorqueLimiterImp* torqueLimiter = pTorqueLimiterConstruction();
    TorqueLimiter* torqueLimiter = pTorqueLimiterConstruction();
    TorqueLimiterBackEnd* torqueLimiterBackEnd = torqueLimiter;
    
13. message, timer
    ////message SEND & RECEIVE:              //who send msg? motionControl send every set Time. //CAN_BUS recv.
    pui8EncoderInfo = messageRouter->pGetPayloadBuffer(static_cast<uint8_t>(messages::SEND_DOOR_ANGLE_REPETITION));
    ////event Timer:
    eventTimer->vRequestTimeout( ui32MotionSendDoorAngleRepetitionTime );
}
//1004.

//================================
1005-template:
{

dekai-suzhou.
qtk12345678


#export PATH=$PATH:/C/mbs/programs/bin/
#export PATH=$PATH:/C/mbs/programs/bin/

}
//1005.

//================================
1006-project design:
{
01. backup .setting.
02. send email for one question.
03. 做事，完成清单；帮助，别人的支持； //做事，提出风险，请示领导通过。
	适应环境与人，Jeppa remove enum ADC_TO_VOLT, 要求严格，干净。
04. 运行调试：机械连杆，CCL电机（编码线），SPM电机（驱动线），
			功能开到位晃动，
			
05. State Machine. How many states? What States?
	//! object   ------->states. //isoSgl ->0, 1.------>state machine       ------------>condition table.
		//!      ------->signals                 ------>events              ------------>messages.
	//! signals -> events. signalsArray[SGINAL_IDx], eventsArray[EVENT_ID]. SetEvent(event, EVENT_ID, MESSAGE_ID). 
		//! input signals  ->events.  
		//! fault signals  ->events.
		//! process signals->events.
		//! state signals  ->events.
	//! events -> messages:    messageArray[MESSAGE_ID].   between modules, independence.
		//! CMD.
		/// enum {MSG_ISO_SET = 0, ..., MSG_LENGTH}
	
	//event, jump edge once, send to other module. //reset iso event, to interior light, to open cmd.
	if (signal)
	{
		isoSetMsgToIntLight = signal;
		isoSetMsgToOpnCmd   = signal;
	}
	else //can recover event.
	{
		isoResetMsgToIntLight = signal;
	}

	SetEvent(signal, SGINAL_IDx, EVENT_IDx)
	{
		if (signalsArray[SGINAL_IDx] != signal)
		{
			if (signal)
			{
				eventsArray[EVENT_IDx] = signal;
			}
			signalsArray[SGINAL_IDx] = signal;
		}
	}
	SetEvent((!isoSgl), SGINAL_IDx, EVENT_ISO_RESET_IDx);
	
	
	//! conditions: truth table.
	//! priority: priority table.
	switch, state no more 5. 
	
    if, else if  only use 1 condition. many conditons, use truth table.
	
	SetLightOnTruthTable    = (A && B && C && D);
	SetLightFlashTruthTable = (E && F && G && D);
	if (SetLightOnTruthTable)
	{	LightValue = ON;
	}
	else if (SetLightFlashTruthTable)
	{	LightValue = FLASH;
	}
	else
	{	LightValue = OF;
	}
	
	PriorityTable = (!A && !B && !C && D);
    
06. instruction mode / order logic design:
    fireMode > learnMode > manualMode > safetyMode > activeMode
    
07. c struct instead of c++ class.
    1-function pointer, (fun *)(parameters,..)
    2-this pointer.
    3-_VAL_ARGUS
    4-Structor function.
    5-inherit, //use no-named struct.
    6-
}
//1006.

//================================
1007-job finshed:
{
01. digitalOutput component.
02. torqueLimiter.
03. freeSwingCommand.
04. slowOpenCommand. (debug and revise closeCommand.cpp without spring./*init open, close obstruct, if check 1 condition.*/)
05. doorControlApp.
}
//1007.

//================================
1008-platform design:
{
01. 0907-It would be good to have a small test-plan for the comming work. 
		 It could be just comments indicating what tests will need to be developped.
	0908-the documentation in PiController.hpp that the "incremental" form of a PI controller is used.
	0905-there was a general update of the code to comply with our PC-lint
	0903-length.
MOTION_COMMAND_TRANSITION_DELAY_TIMER_ID(41-length)
MOTION_CONTROL_TRANSITION_DELAY_TIMER_ID(41-length)	

	0910-the filter function should be made as simple as possible, since it will execute in the ISR context of the motor controller. 
	check what PC-Lint says
	0910-The unit test should run on target as well. //eventTimer/unitTest && $(MAKE) runWindows
	0910-variableWithUnit.
	1030-Could the code be shared instead of copied? //not repeated code.
	1030-calculate less.
	1030-common helper function.
	
	1100-quasar and quasarMotor target doesn’t compile
	1101-check the door opens and closes.
	1102-Check if the onObject() function.
	1103-indentation bloopers.
	1104-git pull before continuing.
	1105-NOT use tab, use 4 spaces.
    

------
clean,
gcovr,
runWindows,
windows.

/SwingDoorPlatform/mbsSdk/components/system/tcpIp/ssl_tp/polarSSL/doxygen/polarssl.doxyfile

G:\R&D\2017\Janny Zhang\标准\USA

------
Corrected in new commit.
Removed in new commit.
It has been corrected.
Removed the 'open' state.
Fixed？ in new commit as it may. 
As far as my concerned it's use full to distinguish class and object with C(class).
Changed to xxx in new commit.
Removed the outputConfig.hpp file in new commit.
//csi16StalledSpeedDifferenceLimit is not used as a speed difference, but rather as an absolute limit
I think that the introduced statuses SLOW_OPENING ad SLOW_STALLED are unnecessary. 
Use the normal once OPENING and STALLED.

a more descriptive name.

pop up an issue
comment,
description,
documentation,



}
//1008.













MBS_CC_TOOLCHAIN_PATH   ../mbsToolchains/

make -j build,quasar,ARMCM3_GCC-debug-none-mbs_st_m64_core_v10 
/cygdrive/c/mbs/zs_plat/mbsSdk/tools/ABS/build.mk:17: *** Toolchain "gcc-arm-none-eabi-6-2017-q2" is not supported, choose one of the following: {  }. If you have defined a custom MBS_CC_TOOLCHAIN_PATH, make sure to end it with a slash.  Stop.



${GCC_HOME}\bin;${GRAPHVIZ_HOME}\bin;${CYGWIN_HOME}\bin;C:\mbs\programs\bin\;C:\mbs\programs\cygwin\bin;C:/Program Files (x86)/Java/jre1.8.0_161/bin/client;C:/Program Files (x86)/Java/jre1.8.0_161/bin;C:/Program Files (x86)/Java/jre1.8.0_161/lib/i386;C:\ProgramData\Oracle\Java\javapath;C:\Python27\Lib\site-packages\PyQt4;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Python27;C:\Python27\DLLs;C:\Python27\Scripts;C:\Python27\gnuplot\binary;C:\Program Files (x86)\pythonxy\SciTE-3.5.1-4;C:\Program Files (x86)\pythonxy\console;C:\Program Files (x86)\Borland\StarTeam SDK 10.4\Lib;C:\Program Files (x86)\Borland\StarTeam SDK 10.4\Bin;C:\Program Files\Git\cmd;C:\Users\jerhua\AppData\Local\Microsoft\WindowsApps;C:\mbs\programs\eclipse








//################################
1009-log:
{
周二，09：00
周三，13：00

//==================================	
2019.05.29 Wednesday.
    01. Android, do do do.
    02. PLC,
    03. platform code, new added, rtos, mbs, debug reset,
    04. diagram designer,
    05. change gitlat server.

//==================================	
2019.03.22 Friday.
01. topic: IHS-Infomation handling system. info-scheme-decesion.
	BOM-Bill of Material, 
	EMS-Environmental Management System. IMI. 
	PDS, ProDirectSoccer代购中文站点
	PCN-Process Change Notice,.

//==================================	
2019.03.19 Tuesday.
01. static 
02. meeting points: 
	1-back-check-angle, 2-ble, 3-American, 4-UL docum(how much), 5-safeRTOS, 
	6-jira-SPS126, SPS127, SPS128, 7-merge param branch, 8-everyone has work.
	who: jeppa, dh, matin.

	
//==================================	
2019.03.08 Friday.
01. 制版，重复多次 有意见，问题请示；
02. 贴标，注意形象；
03. 电池，携带美国；
04. DSS200 发布release，不等测试完成； CP, CM,
05. 电池测试，前后端原理，接口，优缺点；


宁德时代
比亚迪，补贴退坡，
亿纬锂能

它是由BJT（双极型三极管）和MOS（绝缘栅型场效应管）组成的复合全控型电压驱动式功率半导体器件，它拥有的特性是：高输入阻抗，可采用通用低成本的驱动线路；高速开关特性；导通状态低损耗。IGBT兼有MOSFET的高输入阻抗和GTR的低导通压降两方面的优点。GTR饱和压降低，载流密度大，但驱动电流较大；MOSFET驱动功率很小，开关速度快，但导通压降大，载流密度小。IGBT综合了以上两种器件的优点：驱动功率小而饱和压降低，是一种适合于中、大功率应用的电力电子器件。IGBT在综合性能方面占有明显优势，非常适合应用于直流电压为600V及以上的变流系统如交流电机、变频器、开关电源、照明电路、牵引传动等领域。
	
==================================	
2019.03.04 - 09 WK10.
01. topic,
02. name list,
03. code,
04. 

        int32_t siPos1 = encoder->si32GetShaftPosition();
        int32_t siPos2 = armSystem->si32GetDoorAngleInMicroRad();
        #ifdef  _DEBUG_PORT_
        dbgPort << siPos1 << "  "
                << siPos2 << "\n";
        #endif
			

//==================================	
2019.03.08 Friday.
01. 制版，重复多次 有意见，问题请示；
02. 贴标，注意形象；
03. 电池，携带美国；
04. DSS200 发布release，不等测试完成； CP, CM,
05. 电池测试，前后端原理，接口，优缺点；

//==================================	
2019.03.06 Wednesday.
	
encoder: const uint32_t ui16Temp = static_cast<uint16_t>(si16ShaftSpeed);


    ////////////////////////////////////////////////////////////////////////////////////////////
    // Enums and defines needed by the lockDriver
    ////////////////////////////////////////////////////////////////////////////////////////////
    //! Lock driver enable unlock deci-door angle range
    enum { LOCK_DRIVER_UNLOCK_DECI_DOOR_ANGLE = 8730};

	
==================================	
2019.02.11 - 16 WK07.
01. Platform code, issuse fix, transform to sdk4.4.0, springImp.
02. sw300 code,
03. foc control.
04. english.
05. chess.	

备注：	
北线：	
A.公司大门口	
B.锦丰广场	
C.东环大润发（南门口）	
D.杨枝塘城区高速入口	
	
南线：	
E.公司大门口	
F.钟南街地铁站3号出入口	
G.湖东邻里中心公交车站	
H.杨枝塘城区高速入口	
	



//==================================	
2019.03.04 Monday.
01. UNIT-TEST

//==================================	
2019.03.01 Friday.
01. UNIT-TEST

//-01-// enum
enum { MAX_LEARN_CYCLE_TIME = 120000 }; /* ms */

//-02-// help variables  //类似全局变量，不用函数传参，方便。
int32_t si32DoorAngle = 0;

//-03-// FSM goto function.
motionControl::MotionCommand* pGotoSettleDoorStopPhase();

//-04-// Config Test helper function.
void vConfigNormalLearnResults ( 0 /*pv1*/, 1 /*pv2*/, 2 /*pv3*/ );

//-05-// Function Test helper function.
void vTestReleaseTension(motionControl::MotionCommand* testLearnCommad);

//-06-// Function Expect helper function.
void vExpectReleaseTension(motionControl::MotionCommand* testLearnCommad);

//-07-// "Repeat" expect helper function. //重复的代码，封装为函数；同类多数据，传入为参数。
void vSubExpectGetDoorAngle ( int32_t* psi32DoorAngle ); //subroutine

//-08-// TEST.
TEST( LearnCommand, RestartLearnCommand)

	pui8EncoderInfo[0U]		= static_cast<uint8_t>(ui32Temp /16777216U);		// right shift 24 bits
	pui8EncoderInfo[1U] 	= static_cast<uint8_t>(ui32Temp /65536U);			// right shift 16 bits
	pui8EncoderInfo[2U] 	= static_cast<uint8_t>(ui32Temp /256U);				// right shift 8  bits
	pui8EncoderInfo[3U] 	= static_cast<uint8_t>(ui32Temp);					// right shift 0  bits
	

//==================================	
2019.02.28 Thursday.
01. Learn command,
02. 1009203-slider.


I have reviewed the code, and had some “comments”. 

I really like the “vUpdate” function, since it is easy to follow. 
The “vTimeOutEvent” function could be refactored in a similar fasion. 
Other than that I had some suggestions on simplifications in the “FSM”. 

The “unit-tests” are also very well designed, with helper functions that drives the FSM to each state that you need to test. 
This should make them easy to update and maintain. Well done!

    int32_t si32DoorAngle = 0;
    int16_t si16SampleSpeed = 0;
    int16_t si16DeltaSpeed = 0;
    int16_t si16ExpectedSpeed = 0;
    uint32_t ui32TimeInterval = 0;
	
	// vl=60mrad/s, vh=600mrad/s, ar=300mrad/ss, ad=-300mrad/ss.
    // tr=(600-60)/300=1.8s, Pr=(600-60)*1.8/2=486mrad=(486/3141.6)*180=55.7degree.

	

//==================================	
2019.02.22 Friday.
01. Learn command,
02. 1009203-slider.



配置下Java环境

1. //vim .bash_profile 
	添加：  
2.  //export JAVA_HOME="/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home"
	//export PATH=${JAVA_HOME}/bin:$PATH
	通过:wq，保存并关闭vim
3.  source .bash_profile

C:\Users\jerhua\.bash_profile

GCC_PATH=/C/mbs/mbsToolchains/gcc-arm-none-eabi-4_9-2015q3/bin
MBS_BIN=/C/mbs/programs/bin
MAKE_PATH=/C/mbs/programs/cygwin/bin
export PATH=$PATH:$GCC_PATH:$MBS_BIN:$MAKE_PATH

勒克斯lux，法定符号lx)是照度(Illuminance)的单位。被光均匀照射的物体，在1平方米面积上所得的光通量是1流明时，它的照度是1勒克斯。适宜于阅读和缝纫等的照度约为500勒克斯。

流明，光通量的单位。

发光强度为1坎德拉(cd)的点光源，在单位立体角（1球面度）内发出的光通量为“1流明”，英文缩写(lm)。

勒克斯是引出单位，由流明(lm)引出。流明则由标准单位坎德拉(cd)引出

坎德拉，曾一度称为新烛光
发光强度简称光强，国际单位是（坎德拉）简写cd.

光通量（luminous flux）指人眼所能感觉到的辐射功率，它等于单位时间内某一波段的辐射能量和该波段的相对视见率的乘积。

Segmentation fault 这个提示还是比较常见的，这个提示就是段错误，这是翻译还是十分恰当的。

Core Dump 有的时候给我们呈现的翻译很有趣是”吐核“，但是实际上比较贴切的翻译是核心转储（是操作系统在进程收到某些信号而终止运行时，将此时进程地址空间的内容以及有关进程状态的其他信息写出的一个磁盘文件。这种信息往往用于调试），这个“吐核”的产生和王安博士有着一些关联，其实“吐核”这个词形容的很恰当，就是核心内存吐出来。

出现这种错误可能的原因（其实就是访问了内存中不应该访问的东西）：

　　1，内存访问越界：

　　　　（1） 数组访问越界，因为下标出超出了范围。

  　　　  （2） 搜索字符串的时候，通过字符串的结尾符号来判断结束，但是实际上没有这个结束符。

                （3）使用strcpy, strcat, sprintf, strcmp,strcasecmp等字符串操作函数，超出了字符中定义的可以存储的最大范围。使用strncpy, strlcpy, strncat, strlcat, snprintf, strncmp, strncasecmp等函数防止读写越界。

　　2，多线程程序使用了线程不安全的函数。

　　3，多线程读写的数据未加锁保护。

　　　　对于会被多个线程同时访问的全局数据，应该注意加锁保护，否则很容易造成核心转储

　　4，非法指针

  　　　　（1）使用NULL指针

 　　　　 （2）随意使用指针类型强制转换，因为在这种强制转换其实是很不安全的，因为在你不确认这个类型就应该是你转化的类型的时候，这样很容易出错，因为就会按照你强制转换的类型进行访问，这样就有可能访问到不应该访问的内存。

 　　5，堆栈溢出

　　　　不要使用大的局部变量（因为局部变量都分配在栈上），这样容易造成堆栈溢出，破坏系统的栈和堆结构，导致出现莫名其妙的错误。  
		
		
		
		
		
长线游：
1.长滩5晚6日游
时间：3月14日～3月19日(3月13日晚上19：30左右从公司出发)
价格：鉴于酒店房间数量有限，按最终出游人数确定入住酒店：
4180元/人（住FAIRWAYS或同级）或3980元/人（住SAVOY或同级）

短线游：
三清山婺源三日游
时间：3月15日～3月17日
价格：1492元

 
菲律宾团队旅游签证所需材料： 
1. 护照原件（有效期从回国之日算至少六个月以上）；
2. 签证申请表2份，并附上二张2寸白底彩色近6个月免冠证件照
3. 身份证正反面复印件
4. 十八周岁以下儿童需提供 出身证明复印件，并必须与父母其中一方出行，否则无法办理



//==================================	
2019.02.21 Thursday.
01. Learn command,
02. cell   -> format,  protect -> hide
	review -> protect,

//==================================	
2019.02.19 Tuesday.
01. Learn command,
02. English,
03. Birthday.

    uint32_t ui32AccelerateTimes = (motionControlInternal::LEARN_MAX_SPEED - motionControlInternal::LEARN_LOW_SPEED);
    ui32AccelerateTimes *= 1000;
    ui32AccelerateTimes /= motionControlInternal::LEARN_OPEN_ACC_INTERVAL;
   for (uint16_t i=0; i<ui32AccelerateTimes; i++)
   {
       int32_t si32CalculatedSpeed = (motionControlInternal::LEARN_OPEN_ACC_INTERVAL)*(motionControlInternal::LEARN_OPEN_ACCELERATION);
       si32CalculatedSpeed *= i;
       si32CalculatedSpeed /= 1000;
       si32CalculatedSpeed += motionControlInternal::LEARN_LOW_SPEED;
       int16_t si16ExpectedSpeed = static_cast<int16_t>( si32CalculatedSpeed );
       vExpectOpenPhaseOneBeforeBP4 ( &si32DoorAngle, &si16ExpectedSpeed );
       learnCommand->vUpdate(si16SampleSpeed);
   }

//==================================	
2019.02.18 Monday
01. Learn command,
02. English, meeting,
03. Matrix,

git remote show origin
git remote prune origin
git fetch -p


//==================================	
2019.02.14 Thursday
01. 真实说话，学会表达，对猪闭嘴；
02. 掌握财务，争取优秀，心中有湖。
03. 转换系统，工作投入。。。

@rem The arguments for this batch file: 
@rem %1: The path to the project folder
@rem %2: The path to the CodeWarrior installation folder

@rem ------------------------------------------------------
@rem Path to my project folder
SET PROJ_PATH=%1
@rem Path to CodeWarrior installation folder (which is e.g. "C:\Freescale\CW MCU v10.2\eclipse\..\MCU")
SET CW_PATH=%2

@rem Path to lint-nt.exe
SET LINT_EXE=C:\lint\lint-nt.exe

@rem Path to my lint configuration files
SET LOCAL_LNT_FILES=C:\Freescale\PC-lint\fsl_lnt

@rem Path to my local lint folder inside the project
SET PROJ_LINT_PATH=%PROJ_PATH%\lint

@rem Lint configuration files and includes
SET LNT_INCLUDES=-i"%LOCAL_LNT_FILES%" "%LOCAL_LNT_FILES%\co-mwhc08.lnt" -i%LOCAL_LNT_FILES%

@rem --------------- Run PC-lint ---------------------------
%LINT_EXE% %LNT_INCLUDES% %PROJ_LINT_PATH%\proj_options.lnt %PROJ_LINT_PATH%\proj_files.lnt -vf


//==================================	
2019.02.13 Wednesday
01. 请假2小时，感冒咳嗽睡。
02. lint compile.

make -f co-gcc.mak GCC_BIN='name of the gcc binary' GXX_BIN='name of the g++ binary' \
 CFLAGS='[usual C compile switches here]' \
 CXXFLAGS='[usual C++ compile switches here]' \
 CPPFLAGS='[usual common preprocessor switches here]' \
 COMMON_FLAGS='[usual C & C++ compile switches here]'
	
//==================================	
2019.02.12 Tuesday
请假，老妈生日。
	
//==================================	
2019.02.11 Monday
01. Backup branches.
02. Calander.
03. Eclipse.
04. Stock.

  EMC_test_v3_2A         6ff77b9b [origin/EMC_test_v3: ahead 3] emc test 4A.
  EMC_test_v3_2ms        32e321e0 [origin/EMC_test_v3] change sample time to 2ms.
  SPS_103                055ab6f3 [origin/SPS_103] updated by review discuss.
  SPS_48                 180788e9 [origin/wls_dev_doorCtl: behind 8] Updated some documentation and misspellings
  debugPort_cherry_pick  cc45af36 Lint debug port for "cherry-pick".
  develop                12c3b401 [origin/develop: behind 23] Merge branch 'jgr_sdk4.4.0' into 'develop'
  jer_dev_dbgPort        bd250336 change some comments.
  jer_dev_doorAngle      bd250336 [origin/jer_dev_doorAngle] change some comments.
  jer_dev_doorCtlApp     5e66d144 [origin/jer_dev_doorCtlApp] partly finish door control app unit test.
  jer_dev_freeSwCmd      5d3c9ae9 [origin/jer_dev_freeSwCmd: behind 2] Revert the time delay to 200, rename two test cases
  jer_dev_slowOpnCmd     24393893 [origin/jer_dev_slowOpnCmd: behind 5] Merge branch 'jer_dev_slowOpnCmd' of aaes.githost.io:AAESSwingDoor/SwingDoorPlatform into jer_dev_slowOpnCmd
  jer_dev_spring         d950e391 [origin/jer_dev_spring] Merge branch 'jer_dev_spring' of aaes.githost.io:AAESSwingDoor/SwingDoorPlatform into jer_dev_spring
  jer_dev_swgSdk4.4.0    984470a0 [origin/jer_dev_swgSdk4.4.0: behind 5] Merge remote-tracking branch 'origin/develop' into jer_dev_swgSdk4.4.0
  jerry_dev_doorLogic    13fb4d4a [origin/jerry_dev_doorLogic: ahead 1] revise.
  jerry_dev_doorLogicApp 2133a04f doorLogicApp disign.
  jerry_dev_torqueLimit  d6f20307 [origin/jerry_dev_torqueLimit] Merge branch 'origin/develop' into jerry_dev_torqueLimit
  jerry_ms1_110          79c249f7 [origin/jerry_ms1_CCL: gone] open to 110 degree.
  jerry_ms1_CCL+SPM      29e6512a [origin/jerry_ms1_CCL: gone] CCL encoder reverse.
  jerry_ms1_print        06a58adc [origin/develop_ms1_demo: ahead 14] debug port commit for cherry-pick.
  jerry_v1_prototype     5b86a6f7 [origin/jerry_dev_v1_prototype: gone] add up door open angle.
  jerry_v2_prototype     dbfc2a3c [origin/jerry_dev_v2_prototype: gone] motor current limit to 2500mA, add version id.
  jerry_v3_prototype     0f335eb3 [origin/jerry_ms1_CCL: gone] print moter sample current, not set current.
  jgr_sdk4.4.0           d242463f [origin/jgr_sdk4.4.0] change decription in readme.md
  mg_noise_v3_5s         20ca7604 [origin/develop: ahead 2, behind 38] debug port for cherry-pick
  mg_revPush_v03_agl     90792b08 [origin/develop: ahead 1, behind 84] new revese push mechanic system, enlarge door angle.
  mg_rtos_v01_read       29e6512a CCL encoder reverse.
* mg_sdk4_powerAssist    2599c338 try to add power assist openning assist force.
  mg_sdk4_test9          ec938de6 [origin/develop: ahead 16, behind 23] Merge branch 'develop' of aaes.githost.io:AAESSwingDoor/SwingDoorPlatform into mg_sdk4_test9
  ms2_noSpring           71fde08e add motor pwm test, close trajactory may wrong.
  ms2_test               8a8a3648 [origin/ms2_test: ahead 7] format closecommand.cpp
  ms3_wls_pushAndGo      939f20a6 [origin/wls_dev_doorCtl: ahead 1, behind 9] push & go, test not full opened

	
//mbsSdk4.4.0
	
//2015q3.
make -j build,quasarMotor,ARMCM3_GCC-release-none-mbs_st_m64_core_v10 
/cygdrive/c/mbs/SwingDoorPlatform/mbsSdk/tools/ABS/build.mk:17: *** Toolchain "gcc-arm-none-eabi-6-2017-q2" is not supported, choose one of the following: { gcc-arm-none-eabi-4_9-2015q3 }. If you have defined a custom MBS_CC_TOOLCHAIN_PATH, make sure to end it with a slash.  Stop.

//can crc8.h
components/application/aaesGeneric/canComm/src/canComm.cpp:13:19: fatal error: crc8.h: No such file or directory
  #include <crc8.h>

	C:\mbs\SwingDoorPlatform\mbsSdk\components\common\utilities\inc


modules/comm/motorBoard/mbs_st_m64_core_v10/init/src/comm.cpp:91:81: error: invalid conversion from 'const char*' to 'MbsMsgMailboxIdentifier {aka char*}' [-fpermissive]
      if( MBS_STATUS_OK != mbsMsgRegister( &canCommServerHandle, canSrvName, 20U ) )

C:\mbs\SwingDoorPlatform/components/application/aaesGeneric/canComm/src/canComm.cpp:202: undefined reference to `crc8calc'

	  /*
	  char* const canSrvName = commInternal::can1Imp.pGetCanServiceName();
		components/application/aaesGeneric/canComm/src/canComm.cpp
	  */
	
==================================	
2019.01.21 - 25 WK04.
01. Platform code, issuse fix, transform to sdk4.4.0, springImp.
02. sw300 code,
03. foc control.
04. english.
05. chess.

	
//================================
2019.01.25 Friday
01. meeting: SL500 trainning 通用部分, Slider train scope爆炸图, Julie电机控制。
02. plan-2019: KPI mark, welcome new.

//================================
2019.01.24 Thursday.
01. summary note.
02. better work.
	
//================================
2019.01.23 Wednesday.
_SPRING_SYSTEM_IS_INCLUDED_IN_DUT_ \

    components/application/swingDoorGeneric/springSystem/unitTest \


==================================	
2019.01.14 - 18 WK03.
01. Platform code, issuse fix.
02. sw300 code,
03. foc code.
04. protocol. //kan kai. cheng zhang you suohuo.
05. english.
06. chess.



//================================
2019.01.16 Wednesday.
01. sw300 code,
02. plat form code.
03. foc code.

//================================
2019.01.14 Monday.
01. sw300 code,
02. plat form code.
03. maxima.

//================================
2019.01.11 Friday.
01. meeting.
02. Maxma use, 
03. UML use, 
04. safety in motor board, no-freeRTOS, OPD ?


//================================
2019.01.10 Thursday.
01. SPS_50, SPS_51.
02. eclipse shortcut, bookmark: Alt+Shift+B。  //Ctrl+Shift+G
03. compare meld right key not necessary.
04. effective learn, code, tool find and use. //serial tool. QT is too large 2.8G for windows
	test in vitrual box.					  //better to use c#.
05. professional knowledge!!!

//================================
2019.01.09 Wednesday.
01. KPI.
02. trajactory breakpoints reset.
03. ABS_INTERFACE.

//================================
2019.01.08 Tuesday.
01. KPI.
02. put plantuml.jar in doxgen graphic/bin/.

//================================
2019.01.04 Friday.
01. KPI.
G:\R&D\Folder_Tree_Management\95_Project_Review\KPI\2018\

//================================
2019.01.02 Wednesday.
01. email!
02. platform: sendDoorAngle.//doorControlApp. //debugPort, //serialPort.//makefile.
03. pc-lint.
12. FOC, doctor paper.('MOTOR')
13. freeRTOS.         ('rtos')
14. vs2005，C# code:  ('pc sw')

21. c struct make c++ class.
22. inline func.
23. C macro # STR, ## CONS.
24. //openocd.
25. c++ design.
26. python.

}
//1009.
